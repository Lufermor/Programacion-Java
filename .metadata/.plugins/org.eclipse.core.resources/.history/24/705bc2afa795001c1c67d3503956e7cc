package highLevelFiles;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.Formatter;
import java.util.Scanner;

public class TextFilesExercise2 {
	/*
	 * Pre: ---
	 * Post: Este método crea un objeto tipo File del que se leerá la información
	 * de cada línea se parsean los datos y se guardan en variables
	 */
	public static void copiarFichero(String fichero, String nombre) {
		String name = "";
		String apellidos = "";
		String dni = "";
		String puntos = "";
		File file = new File(fichero);
		try {
			Formatter salida = new Formatter(nombre);
			
			try {
				Scanner f = new Scanner(file);
				int contador = 0;
				while(f.hasNextLine()) {
					String linea = f.nextLine();
					//Limpiamos la línea
					linea = linea.replaceAll(",", "");
					String[] lineaSep = linea.split(" ");
					dni = lineaSep[0];
					apellidos = lineaSep[1] + " " + lineaSep[2];
					if(lineaSep.length == 4) name = lineaSep[3];
					else if(lineaSep.length == 5) name = lineaSep[3] + " " + lineaSep[4];
					int p = 59-name.length()-apellidos.length()-9;
					puntos = String.format("%" + p + "s", "").replaceAll(" ", ".");
					System.out.println(name + " " + apellidos + puntos + dni);
					//salida.format(name + " " + apellidos + puntos + dni);
				}
				//Se libera el fichero que estamos leyendo:
				f.close();
			} catch (FileNotFoundException e) {
				System.out.println("El fichero " + fichero + " no ha podido ser leído.");
			}
			salida.close();
		} catch (FileNotFoundException e1) {
			System.out.println("El fichero " + nombre + " no ha podido ser creado.");
		}
		
	}
	/*
	 * Pre: ---
	 * Post: Este método main con una ruta dada y otra ruta pedida al usuario,
	 * llama al método copiarFichero para copiar la información con un formato específico.
	 */
	public static void main(String[] args) {
		String fichero = "/Users/User/Documents/Java/PruebaHighLevelFiles/personas.txt";
		Scanner entrada = new Scanner(System.in);
		System.out.println("Introduzca el nombre (con ruta completa) para el nuevo archivo:");
		String nuevoFile = entrada.nextLine();
		copiarFichero(fichero, nuevoFile);
		System.out.println("Operación terminada.");
		entrada.close();
	}
}
